webpackJsonp([1],{116:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(59),i=r(119),n=r(38),s=r(193),o=r(301),c=(r.n(o),r(302));r.n(c);a.a.use(s.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:n.a,template:"<App/>",components:{App:i.a}})},119:function(e,t,r){"use strict";function a(e){r(120)}var i=r(61),n=r(122),s=r(26),o=a,c=s(i.a,n.a,!1,o,null,null);t.a=c.exports},120:function(e,t){},122:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},124:function(e,t,r){"use strict";var a=r(62),i=r(187),n=r(26),s=n(a.a,i.a,!1,null,null,null);t.a=s.exports},166:function(e,t,r){"use strict";var a=r(77),i=r(167),n=r(26),s=n(a.a,i.a,!1,null,null,null);t.a=s.exports},167:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[r("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),e._v(" "),r("b-navbar-brand",[e._v("Ticket System")]),e._v(" "),r("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[r("b-navbar-nav",[r("b-nav-item",{on:{click:function(t){e.logout()}}},[e._v("Logout")])],1)],1)],1)],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},168:function(e,t,r){"use strict";function a(){var e=l+"/api/ticket/tickets";return c.a.get(e).then(function(e){return e.data.tickets})}function i(e){var t=l+"/api/ticket/addticket";return c.a.post(t,{params:e})}function n(e){var t=l+"/api/ticket/deleteticket";return c.a.post(t,{params:e})}function s(e){var t=l+"/api/ticket/resolveTicket";return c.a.post(t,{params:e})}r.d(t,"c",function(){return a}),r.d(t,"a",function(){return i}),r.d(t,"b",function(){return n}),r.d(t,"d",function(){return s});var o=r(78),c=r.n(o),l="http://localhost:"+Object({NODE_ENV:"production"}).PORT||3e3},187:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("app-nav"),e._v(" "),r("b-row",[r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-1",attrs:{horizontal:"",label:"Filter"}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),r("b-input-group-append",[r("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1),e._v(" "),r("b-button",{staticClass:"mr-1",attrs:{variant:"success",size:"sm"},on:{click:function(t){return t.stopPropagation(),e.addTicketModal(t)}}},[e._v("Submit New Ticket")])],1)],1)],1)],1),e._v(" "),r("b-table",{attrs:{responsive:"",striped:"",hover:"","show-empty":"",items:e.tickets,fields:e.fields,filter:e.filter},scopedSlots:e._u([{key:"createdBy",fn:function(t){return[e._v("\n      "+e._s(t.item.createdBy.username)+"\n    ")]}},{key:"assignedTo",fn:function(t){return[e._v("\n      "+e._s(t.item.assignedTo.username)+"\n    ")]}},{key:"priority",fn:function(t){return[r("b-badge",{attrs:{variant:"High"==t.value?"danger":"Medium"==t.value?"warning":"success"}},[e._v(e._s(t.value))])]}},{key:"Info",fn:function(t){return[r("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(r){r.stopPropagation(),e.ticketInfo(t.item,t.index,r.target)}}},[e._v("Details")])]}}])}),e._v(" "),r("b-modal",{attrs:{id:"modalInfo",title:e.modalInfo.title,"ok-only":""}},[r("pre",[e._v(e._s(e.modalInfo.description))]),e._v(" "),e.currentUser._id===e.modalInfo.assignedTo._id&&"Not Resolved"==e.modalInfo.resolvedDate?r("b-button",{staticClass:"mr-1",attrs:{variant:"danger",size:"sm"},on:{click:function(t){e.resolveTicket(e.modalInfo._id)}}},[e._v("Resolve")]):e._e(),e._v(" "),e.currentUser._id===e.modalInfo.createdBy._id?r("b-button",{staticClass:"mr-1",attrs:{variant:"danger",size:"sm"},on:{click:function(t){e.deleteTicket(e.modalInfo._id)}}},[e._v("Delete Ticket")]):e._e()],1),e._v(" "),r("b-modal",{ref:"addTicket",attrs:{"hide-footer":"",title:"Create a new ticket"},on:{hide:e.resetTicketForm}},[r("b-form",{on:{submit:e.createTicket}},[r("b-form-group",{attrs:{id:"ticketGroup"}},[r("label",{attrs:{for:"ticketTitle"}},[e._v("Title")]),e._v(" "),r("b-form-input",{attrs:{required:"",id:"ticketTitle",type:"text",required:"",placeholder:"Enter Title"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e._v(" "),r("label",{attrs:{for:"ticketDescription"}},[e._v("Description")]),e._v(" "),r("b-form-textarea",{attrs:{required:"",id:"ticketDescription",placeholder:"Enter Description",rows:3,"max-rows":6},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),r("label",{attrs:{for:"ticketPriority"}},[e._v("Priority")]),e._v(" "),r("b-form-select",{staticClass:"mb-3",attrs:{id:"ticketPriority",required:""},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}},[r("option",{attrs:{value:"Low"}},[e._v("Low")]),e._v(" "),r("option",{attrs:{value:"Medium"}},[e._v("Medium")]),e._v(" "),r("option",{attrs:{value:"High"}},[e._v("High")])]),e._v(" "),r("label",{attrs:{for:"type-date"}},[e._v("Due Date")]),e._v(" "),r("b-form-input",{attrs:{id:"type-date",type:"date",required:""},model:{value:e.form.dueDate,callback:function(t){e.$set(e.form,"dueDate",t)},expression:"form.dueDate"}}),e._v(" "),r("label",{attrs:{for:"assignTicket"}},[e._v("Assign Ticket")]),e._v(" "),r("b-form-select",{staticClass:"mb-3",attrs:{id:"assignTicket",required:"",placeholder:"Assign Ticket"},model:{value:e.form.assignedTo,callback:function(t){e.$set(e.form,"assignedTo",t)},expression:"form.assignedTo"}},e._l(e.users,function(t){return t._id!==e.currentUser._id?r("option",{domProps:{value:t}},[e._v("\n          "+e._s(t.username)+"\n        ")]):e._e()}))],1),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},188:function(e,t,r){"use strict";function a(e){r(189)}var i=r(84),n=r(192),s=r(26),o=a,c=s(i.a,n.a,!1,o,null,null);t.a=c.exports},189:function(e,t){},190:function(e,t){},192:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-wrapper border border-light"},[r("b-tabs",[r("b-tab",{attrs:{title:"Login",active:""}},[r("b-form",{staticClass:"loginForm",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("b-form-group",{attrs:{id:"ticketGroup"}},[r("label",{attrs:{for:"ticketTitle"}},[e._v("Email")]),e._v(" "),r("b-form-input",{attrs:{required:"",id:"email",type:"email",required:"",placeholder:"Enter Emails"},model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),e._v(" "),r("label",{attrs:{for:"ticketTitle"}},[e._v("Password")]),e._v(" "),r("b-form-input",{attrs:{required:"",id:"password",type:"password",required:"",placeholder:"Enter Password"},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1),e._v(" "),r("b-tab",{attrs:{title:"Register"}},[r("b-form",{staticClass:"loginForm",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("b-form-group",{attrs:{id:"userRegister"}},[r("label",{attrs:{for:"Remail"}},[e._v("Email")]),e._v(" "),r("b-form-input",{attrs:{required:"",id:"Remail",type:"email",required:"",placeholder:"Enter Email"},model:{value:e.registerCredentials.email,callback:function(t){e.$set(e.registerCredentials,"email",t)},expression:"registerCredentials.email"}}),e._v(" "),r("label",{attrs:{for:"Rusername"}},[e._v("Username")]),e._v(" "),r("b-form-input",{attrs:{required:"",id:"Rusername",type:"text",required:"",placeholder:"Enter Username"},model:{value:e.registerCredentials.username,callback:function(t){e.$set(e.registerCredentials,"username",t)},expression:"registerCredentials.username"}}),e._v(" "),r("label",{attrs:{for:"Rpassword"}},[e._v("Password")]),e._v(" "),r("b-form-input",{attrs:{required:"",id:"Rpassword",type:"password",required:"",placeholder:"Enter Password"},model:{value:e.registerCredentials.password,callback:function(t){e.$set(e.registerCredentials,"password",t)},expression:"registerCredentials.password"}})],1),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1),e._v(" "),r("vue-toast",{ref:"toast"})],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},225:function(e,t){},242:function(e,t){},287:function(e,t){},301:function(e,t){},302:function(e,t){},38:function(e,t,r){"use strict";var a=r(59),i=r(123),n=r(124),s=r(188),o=r(48);a.a.use(i.a);var c=new i.a({mode:"history",routes:[{path:"/",name:"login",component:s.a},{path:"/dashboard",name:"Dashboard",component:n.a,meta:{requiresLogin:!0}}]});c.beforeEach(function(e,t,r){e.matched.some(function(e){return e.meta.requiresLogin})?Object(o.b)().then(function(t){!1===t.data.success?r({path:"/",query:{redirect:e.fullPath}}):r()}):r()}),t.a=c},48:function(e,t,r){"use strict";function a(e){var t=d+"/api/user/authenticate";return u.a.post(t,{params:e})}function i(){var e=d+"/api/user/verifyToken";return c.a.getItem("token").then(function(t){return u.a.post(e,{params:t})})}function n(){var e=d+"/api/user/getUsers";return u.a.get(e).then(function(e){return e.data.users})}function s(e){var t=d+"/api/user/register";return u.a.post(t,{params:e})}r.d(t,"d",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"a",function(){return n}),r.d(t,"c",function(){return s});var o=r(33),c=r.n(o),l=r(78),u=r.n(l),d="http://localhost:"+Object({NODE_ENV:"production"}).PORT||3e3},61:function(e,t,r){"use strict";t.a={name:"app"}},62:function(e,t,r){"use strict";var a=r(63),i=r.n(a),n=r(126),s=r.n(n),o=r(129),c=r.n(o),l=r(166),u=r(33),d=r.n(u),f=r(168),m=r(48);t.a={name:"Tickets",components:{AppNav:l.a},data:function(){return{sortBy:null,filter:null,sortDesc:!1,tickets:[],users:[],currentUser:{username:"",_id:""},form:{title:"",description:"",priority:"",dueDate:null,resolvedDate:null,createdBy:"",assignedTo:""},modalInfo:{title:"",description:"",_id:"",assignedTo:{username:"",id:""},createdBy:{username:"",id:""},resolvedDate:null},fields:[{key:"title",sortable:!1},{key:"description",sortable:!1},{key:"dueDate",sortable:!0},{key:"resolvedDate",sortable:!1},{key:"createdBy",sortable:!1},{key:"assignedTo",sortable:!0},{key:"priority",sortable:!1},{key:"Info",sortable:!1}]}},methods:{getTickets:function(){var e=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(f.c)().then(function(t){console.log(t),e.tickets=t;var r=new Date,a=r.getDate(),i=r.getMonth()+1,n=r.getFullYear();a<10&&(a="0"+a),i<10&&(i="0"+i),r=n+"-"+i+"-"+a,e.tickets.forEach(function(e){r>e.dueDate&&(e._rowVariant="danger"),"Not Resolved"!==e.resolvedDate&&(e._rowVariant="success")})});case 1:case"end":return t.stop()}},t,e)}))()},getUsers:function(){var e=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(m.a)().then(function(t){console.log(t),e.users=t,d.a.getItem("_id").then(function(t){e.users.forEach(function(r){t===r._id&&(e.currentUser.username=r.username,e.currentUser._id=t)})})});case 1:case"end":return t.stop()}},t,e)}))()},resolveTicket:function(e){var t=this;Object(f.d)(e).then(function(e){t.getTickets(),t.$refs.modalInfo.hide()})},deleteTicket:function(e){var t=this;Object(f.b)(e).then(function(e){t.getTickets(),t.$refs.modalInfo.hide()})},ticketInfo:function(e,t,r){this.modalInfo.title=e.title,this.modalInfo.description=e.description,this.modalInfo._id=e._id,this.modalInfo.assignedTo.username=e.assignedTo.username,this.modalInfo.assignedTo._id=e.assignedTo._id,this.modalInfo.createdBy._id=e.createdBy._id,this.modalInfo.createdBy.username=e.createdBy.username,this.modalInfo.resolvedDate=e.resolvedDate,this.$root.$emit("bv::show::modal","modalInfo",r)},resetTicketForm:function(){this.form.title="",this.form.description="",this.form._id="",this.form.dueDate="",this.form.assignedTo="",this.form.resolvedDate=""},addTicketModal:function(){this.$refs.addTicket.show()},createTicket:function(e){var t=this;e.preventDefault(),this.form.createdBy=this.currentUser,console.log(this.form.createdBy),Object(f.a)(i()(this.form)).then(function(){t.getTickets(),t.$refs.addTicket.hide()})}},mounted:function(){this.getUsers(),this.getTickets()}}},77:function(e,t,r){"use strict";var a=r(33),i=r.n(a),n=r(38);t.a={name:"app-nav",methods:{logout:function(){i.a.removeItem("token").then(function(){console.log("Successfully Logged Out"),n.a.push("/")}).catch(function(e){console.log(e)})}}}},84:function(e,t,r){"use strict";var a=r(63),i=r.n(a),n=r(48),s=r(33),o=r.n(s),c=r(190),l=(r.n(c),r(191)),u=r.n(l),d=r(38);t.a={name:"Login",components:{VueToast:u.a},data:function(){return{credentials:{email:"",password:""},registerCredentials:{email:"",username:"",password:""}}},methods:{login:function(){var e=this;this.credentials.email=this.credentials.email.toLowerCase(),Object(n.d)(i()(this.credentials)).then(function(t){null==t.data.error?(console.log(t),o.a.setItem("_id",t.data._id),o.a.setItem("token",t.data.token).then(function(){d.a.push("Dashboard")})):e.$refs.toast.showToast(t.data.error,{theme:"error",timeLife:3e3})})},register:function(){var e=this;this.registerCredentials.email=this.registerCredentials.email.toLowerCase(),Object(n.c)(i()(this.registerCredentials)).then(function(t){null==t.data.error?(e.$refs.toast.showToast("User Created, Please Log In",{theme:"success",timeLife:3e3}),e.registerCredentials.email="",e.registerCredentials.username="",e.registerCredentials.password=""):e.$refs.toast.showToast(t.data.error,{theme:"error",timeLife:3e3})})},resetOptions:function(){this.$refs.toast.setOptions({maxToasts:6,position:"bottom middle"})}},mounted:function(){this.resetOptions()}}}},[116]);
//# sourceMappingURL=app.5063375c337cd64c8da7.js.map