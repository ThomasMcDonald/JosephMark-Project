webpackJsonp([1],{"1/oy":function(t,e){},"9M+g":function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=r("VU/8")({name:"app"},i,!1,function(t){r("SuP1")},null,null).exports,n=r("/ocq"),s=r("mvHQ"),l=r.n(s),c=r("Xxa5"),u=r.n(c),d=r("exGp"),p=r.n(d),f=r("22C0"),m=r.n(f),v={name:"app-nav",methods:{logout:function(){m.a.removeItem("token").then(function(){console.log("Successfully Logged Out"),P.push("/")}).catch(function(t){console.log(t)})}}},b={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[r("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),r("b-navbar-brand",{attrs:{to:"/"}},[t._v("Ticket App")]),t._v(" "),r("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"/"}},[t._v("Home")]),t._v(" "),r("b-nav-item",{on:{click:function(e){t.logout()}}},[t._v("Logout")])],1)],1)],1)],1)},staticRenderFns:[]},_=r("VU/8")(v,b,!1,null,null,null).exports,k=r("mtWM"),h=r.n(k),g="https://jm-ticketing.herokuapp.com/";var y="https://jm-ticketing.herokuapp.com/";var T={name:"Tickets",components:{AppNav:_},data:function(){return{sortBy:null,filter:null,sortDesc:!1,tickets:[],users:[],currentUser:"",form:{title:"",description:"",priority:"",dueDate:null,resolvedDate:null,createdBy:"",assignedTo:""},modalInfo:{title:"",description:"",_id:""},fields:[{key:"title",sortable:!1},{key:"description",sortable:!1},{key:"dueDate",sortable:!0},{key:"resolvedDate",sortable:!1},{key:"createdBy",sortable:!1},{key:"assignedTo",sortable:!0},{key:"priority",sortable:!1},{key:"Info",sortable:!1}]}},methods:{getTickets:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(void 0,r=g+"/api/tickets",h.a.get(r).then(function(t){return t.data.tickets})).then(function(e){console.log(e),t.tickets=e;var r=new Date,o=r.getDate(),i=r.getMonth()+1,a=r.getFullYear();o<10&&(o="0"+o),i<10&&(i="0"+i),r=a+"-"+i+"-"+o,t.tickets.forEach(function(t){r>t.dueDate&&(t._rowVariant="danger"),"Not Resolved"!==t.resolvedDate&&(t._rowVariant="success")})});case 1:case"end":return e.stop()}var r},e,t)}))()},getUsers:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(void 0,r=y+"/api/user/getUsers",h.a.get(r).then(function(t){return t.data.users})).then(function(e){console.log(e),t.users=e,m.a.getItem("_id").then(function(e){t.users.forEach(function(r){e===r._id&&(t.currentUser=r.username)})})});case 1:case"end":return e.stop()}var r},e,t)}))()},resolveTicket:function(t){var e=this;(function(t){var e=g+"/api/resolveTicket";return h.a.post(e,{params:t})})(t).then(function(t){console.log(t.data.message),e.getTickets()})},deleteTicket:function(t){var e;console.log(t),e=g+"/api/deleteticket/"+t,h.a.post(e)},ticketInfo:function(t,e,r){this.modalInfo.title=t.title,this.modalInfo.description=t.description,this.modalInfo._id=t._id,this.$root.$emit("bv::show::modal","modalInfo",r)},resetModal:function(){this.modalInfo.title="",this.modalInfo.content=""},addTicketModal:function(){this.$refs.addTicket.show()},createTicket:function(t){var e,r,o=this;t.preventDefault(),this.form.createdBy=this.currentUser,(e=l()(this.form),r=g+"/api/addticket",h.a.post(r,{params:e})).then(function(){o.getTickets(),o.$refs.addTicket.hide()})}},mounted:function(){this.getUsers(),this.getTickets()}},w={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("app-nav"),t._v(" "),r("b-row",[r("b-col",{staticClass:"my-1",attrs:{md:"6"}},[r("b-form-group",{staticClass:"mb-1",attrs:{horizontal:"",label:"Filter"}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),r("b-input-group-append",[r("b-btn",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1),t._v(" "),r("b-button",{staticClass:"mr-1",attrs:{variant:"success",size:"sm"},on:{click:function(e){return e.stopPropagation(),t.addTicketModal(e)}}},[t._v("Submit New Ticket")])],1)],1)],1)],1),t._v(" "),r("b-table",{attrs:{responsive:"",striped:"",hover:"","show-empty":"",items:t.tickets,fields:t.fields,filter:t.filter},scopedSlots:t._u([{key:"priority",fn:function(e){return[r("b-badge",{attrs:{variant:"High"==e.value?"danger":"Medium"==e.value?"warning":"success"}},[t._v(t._s(e.value))])]}},{key:"Info",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(r){r.stopPropagation(),t.ticketInfo(e.item,e.index,r.target)}}},[t._v("Details")])]}}])}),t._v(" "),r("b-modal",{attrs:{id:"modalInfo",title:t.modalInfo.title,"ok-only":""},on:{hide:t.resetModal}},[r("pre",[t._v(t._s(t.modalInfo.description))]),t._v(" "),r("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(e){t.resolveTicket(t.modalInfo._id)}}},[t._v("Resolve")])],1),t._v(" "),r("b-modal",{ref:"addTicket",attrs:{"hide-footer":"",title:"Create a new ticket"}},[r("b-form",{on:{submit:t.createTicket}},[r("b-form-group",{attrs:{id:"ticketGroup"}},[r("label",{attrs:{for:"ticketTitle"}},[t._v("Title")]),t._v(" "),r("b-form-input",{attrs:{required:"",id:"ticketTitle",type:"text",required:"",placeholder:"Enter Title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),r("label",{attrs:{for:"ticketDescription"}},[t._v("Description")]),t._v(" "),r("b-form-textarea",{attrs:{required:"",id:"ticketDescription",placeholder:"Enter Description",rows:3,"max-rows":6},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),t._v(" "),r("label",{attrs:{for:"ticketPriority"}},[t._v("Priority")]),t._v(" "),r("b-form-select",{staticClass:"mb-3",attrs:{id:"ticketPriority",required:""},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}},[r("option",{domProps:{value:null}},[t._v("Level of Priority")]),t._v(" "),r("option",{attrs:{value:"Low"}},[t._v("Low")]),t._v(" "),r("option",{attrs:{value:"Medium"}},[t._v("Medium")]),t._v(" "),r("option",{attrs:{value:"High"}},[t._v("High")])]),t._v(" "),r("label",{attrs:{for:"type-date"}},[t._v("Due Date")]),t._v(" "),r("b-form-input",{attrs:{id:"type-date",type:"date",required:""},model:{value:t.form.dueDate,callback:function(e){t.$set(t.form,"dueDate",e)},expression:"form.dueDate"}}),t._v(" "),r("label",{attrs:{for:"assignTicket"}},[t._v("Assign Ticket")]),t._v(" "),r("b-form-select",{staticClass:"mb-3",attrs:{id:"assignTicket"},model:{value:t.form.assignedTo,callback:function(e){t.$set(t.form,"assignedTo",e)},expression:"form.assignedTo"}},[r("option",{domProps:{value:null}},[t._v("Assign")]),t._v(" "),t._l(t.users,function(e){return r("option",{domProps:{value:e._id}},[t._v(t._s(e.username))])})],2)],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1)},staticRenderFns:[]},D=r("VU/8")(T,w,!1,null,null,null).exports,x={name:"Login",data:function(){return{credentials:{email:"",password:""}}},methods:{login:function(){var t,e;(t=l()(this.credentials),e=y+"/api/user/authenticate",h.a.post(e,{params:t})).then(function(t){null==t.data.error?(console.log(t),m.a.setItem("token",t.data.token),m.a.setItem("_id",t.data._id),P.push("Dashboard")):console.log(t.data.error)})}}},I={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-wrapper border border-light"},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[r("b-form-group",{attrs:{id:"ticketGroup"}},[r("label",{attrs:{for:"ticketTitle"}},[t._v("Title")]),t._v(" "),r("b-form-input",{attrs:{required:"",id:"email",type:"text",required:"",placeholder:"Enter Emails"},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),t._v(" "),r("label",{attrs:{for:"ticketTitle"}},[t._v("Title")]),t._v(" "),r("b-form-input",{attrs:{required:"",id:"password",type:"password",required:"",placeholder:"Enter Password"},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1),t._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},staticRenderFns:[]};var $=r("VU/8")(x,I,!1,function(t){r("cGZO")},null,null).exports;o.a.use(n.a);var P=new n.a({mode:"history",routes:[{path:"/",name:"login",component:$},{path:"/dashboard",name:"Dashboard",component:D,meta:{requiresLogin:!0}}]}),C=r("e6fC");r("Jmt5"),r("9M+g");o.a.use(C.a),o.a.config.productionTip=!1,new o.a({el:"#app",router:P,template:"<App/>",components:{App:a}})},SuP1:function(t,e){},cGZO:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.99276e5a99532313e55b.js.map